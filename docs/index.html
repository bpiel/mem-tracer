<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.47 in css mode. -->
<html>
  <head>
    <title>Sayid -- Debug and Profile Clojure</title>
    <style type="text/css">
    <!--


/* =Reset
-------------------------------------------------------------- */

* {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    margin-top: 0;
}

html,
body,
div{
    margin: 0;
    padding: 0;
}

/* =Structures
-------------------------------------------------------------- */

.wrap{
    max-width: 1200px;
    margin: 0 auto;
    padding: 1em 0em;
}

#primary{
    max-width: 900px;
    min-width: 400px;
    margin: 0 auto;
    padding: 0 0.5em;
}

h1 {
  text-align: center;
  font-size: 5em;
  font-family: serif;
  margin: 1em 0 1.4em 0;
}

h2 {
  margin: 1.4em 0 0.7em 0;
  font-size: 2.1em;
}

h3 {
  margin: 1.2em 0 0.7em 0;
  font-size: 1.5em;
}

      body {
        color: #333333;
        background-color: #FFFFFF;
        font-family: sans-serif;
        font-size: 1em;
        line-height: 1.5em;
      }
      pre {
        color: #EDEDED;
        background-color: #222222;
        padding : 0.5em;
        line-height: 1.4em;
        margin: 2em 0;
        font-size: 1.1em;
        white-space: pre-wrap;
      }
      code {
        background-color: #DDDDDD;
        font-size: 1.2em;
        padding: 0.1em 0.2em;
      }
      td {
        padding: 0.5em;
      }

      a {
        color: #5050CC;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }

      #contents-link {
        position: fixed;
        top: 1em;
        right: 1em;
        font-size: 0.9em;
        padding: 0.1em 0.3em;
        background-color: #FFFFFF;
        border: solid 1px #333333;
      }

    .kbd {
     font-family: monospace;
     padding: 3px 5px;
     border: solid 1px #ccc;
     background-color: #fcfcfc;
     border-radius: 3px;
     box-shadow: inset 0 -1px 0 #bbb;
     display: inline-block;
    }

/* htmlize */

      .clojure-keyword {
        /* clojure-keyword-face */
        color: #4c83ff;
      }
      .default {
        /* default */
        color: #EDEDED;
        background-color: #000000;
      }
      .comment {
        /* font-lock-comment-face */
        color: #8B8989;
        font-style: italic;
      }
      .comment-delimiter {
        /* font-lock-comment-delimiter-face */
        color: #8B8989;
        font-style: italic;
      }
      .constant {
        /* font-lock-constant-face */
        color: #4c83ff;
      }
      .function-name {
        /* font-lock-function-name-face */
        color: #ff1493;
      }
      .keyword {
        /* font-lock-keyword-face */
        color: #FBDE2D;
      }

      .rainbow-delimiters-depth-1 {
        /* rainbow-delimiters-depth-1-face */
        color: #DD2222;
      }
      .rainbow-delimiters-depth-2 {
        /* rainbow-delimiters-depth-2-face */
        color: #BB7700;
      }
      .rainbow-delimiters-depth-3 {
        /* rainbow-delimiters-depth-3-face */
        color: #BBBB22;
      }
      .rainbow-delimiters-depth-4 {
        /* rainbow-delimiters-depth-4-face */
        color: #11BB11;
      }
      .string {
        /* font-lock-string-face */
        color: #61CE3C;
      }
      .type {
        /* font-lock-type-face */
        color: #D8FA3C;
      }
      .variable-name {
        /* font-lock-variable-name-face */
        color: #D8FA3C;
      }


      .PURPLE {
        /* (:foreground "#DD88FF") */
        color: #DD88FF;
      }
      .PURPLE-BG {
        /* (:foreground "#DD88FF") */
        background: #DD88FF;

      }

      .CYAN3 {
        /* (:foreground "cyan3") */
        color: #00cdcd;
      }
      .GREEN3 {
        /* (:foreground "green3") */
        color: #00cd00;
      }
      .YELLOW3 {
        /* (:foreground "yellow3") */
        color: #cdcd00;
      }
      .YELLOW3-BG {
        background: #cdcd00;
      }
      .WHITE {
        /* (:foreground "white") */
        color: #ffffff;
      }
      .BLACK {
        color: #000000;
      }
      .RED3 {
        /* (:foreground "red3") */
        color: #ee0000;
      }
      .RED3-BG {
        background: #cd0000;
      }

/* END htmlize */


    -->
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>

<body>
    <div id="page">
        <div id="header" class="site-header">
            <div class="wrap">

                <div id="branding" role="banner">

                </div><!--#branding-->

            </div><!--.wrap-->
        </div><!--#header-->

        <div id="main">
            <div class="wrap">

                <div id="primary">
                    <div id="content" role="main">
                      <h1><img src='sayid-logo.png'></h1>

                      <p>Sayid <i>(siy EED)</i> is a tool for
                        debugging and profiling clojure code.</p>

                      <p>Sayid works by intercepting and recording the
                        inputs and outputs of functions. It can even
                        record function calls that occur inside of
                        functions. The user can select which functions
                        to trace. Functions can be selected
                        individually or by namespace. The recorded
                        data can be displayed, queried and
                        profiled.</p>

                      <p>Sayid currently has three components:</p>

                        <ul>
                          <li><code>core</code> and its supporting namespaces</li>
                          <li>nREPL middleware</li>
                          <li>an emacs-cider nREPL client</li>
                          <ul>
                            <li>although a 3rd-party vim plugin also exists.
                              See <a href="http://arsenerei.com/blog/posts/2017-02-24-vim-sayid/">this</a>
                              and <a href="https://github.com/arsenerei/vim-sayid">this</a>.</li>
                          </ul>
                        </ul>

                      <p>The <code>core</code> namespace is designed
                      to be used directly via a repl and does not
                      require emacs or cider.
                      <b>BUT</b> the
                      emacs-cider integration offers a far better
                      experience, so it is the current focus of this
                      page and my development efforts.
                      </p>

                      <p><a href='http://github.com/clojure-emacs/sayid'>GitHub Repo</a></p>

                      <a id="contents-link" href="#contents" >contents</a>
                      <h2 id="contents">Contents</h2>

                      <ul>
                        <li><a href="#installation">Installation & Requirements</a></li>
                        <li><a href="#conj2016">Conj 2016 Presentation</a></li>
                        <li><a href="#demo1vid">Demo #1 - Video</a></li>
                        <li><a href="#demo1wt">Demo #1 - Walkthrough</a></li>
                        <li><a href="#documentation">Documentation</a></li>
                      </ul>

                      <h2 id="installation">Installation & Requirements</h2>

                      <p>Basic usage requires Clojure 1.7.</p>

                      <h3>Emacs Integration</h3>
                      
                      <p>The Emacs+CIDER setup requires that the
                        Emacs package <code>sayid</code> is installed. It's available
                        on <a href="http://melpa.milkbox.net/#/">MELPA</a>
                        and MELPA Stable. Put this code
                        in <code>init.el</code>, or somewhere, to load
                        keybindings for clojure-mode buffers.</p>

                      <!-- init.el -->
    <pre>
<font color="#BB2222"> (</font>eval-after-load 'clojure-mode
   '<font color="#BB7700">(</font>sayid-setup-package<font color="#BB7700">)</font><font color="#BB2222">)</font></pre>
                        <!-- END init.el -->

     </p>
If you use CIDER's jack-in commands, then Sayid automatically adds the Maven dependency when starting a REPL. This means you don't need to manually add the dependency to your <code>project.clj</code> or <code>deps.edn</code> file.</p>

</p>If you don't use CIDER's jack-in commands, you'll need to add a dependency manually. Read on for more details for different tools.</p>

                      
                      <h3>Leiningen</h3>

                      <p>Add this to the dependencies in your project.clj or lein profiles.clj:</p>
                      
                      <code>[com.billpiel/sayid "0.0.17"]</code><br><br>

                      <p>For the full Emacs+CIDER experience, you'll
                      want to include Sayid as a plug-in. Here's an example of a
                      bare-bones profiles.clj that works for me:</p>

                      <!-- profiles.clj -->
                      <pre>{:user {:plugins [[com.billpiel/sayid "0.0.17"]]}}</pre>
                      <!-- END profiles.clj -->

                      <h3>Clojure CLI - deps.edn</h3>

                      <p>Add a the Sayid dependency to your <code>:deps</code> key.
                        Depending on your desired setup, you may want to add it to
                        an optional profile, or your tools.deps config directory (often
                        <code>$HOME/.clojure</code>).</p>
                      
                      <pre>{:deps
  {com.billpiel/sayid {:mvn/version "0.0.17"}}}</pre>

                      <h2 id="conj2016">Conj 2016 Presentation</h2>

                      <p>I presented Sayid at the Clojure Conj conference in Austin in 2016.</p>

                      <iframe width="560" height="315" src="https://www.youtube.com/embed/ipDhvd1NsmE" frameborder="0" allowfullscreen></iframe>


                      <h2 id="demo1vid">Demo #1 - Video</h2>

                      <p>A demo video I recorded after the very first
                      alpha release. You can find
                      the <a href="http://github.com/bpiel/contrived-example">contrived
                      example</a> project here.</p>

                      <iframe width="560" height="315" src="https://www.youtube.com/embed/wkduA4py-qk" frameborder="0" allowfullscreen></iframe>

                      <h2 id="demo1wt">Demo #1 - Walkthrough</h2>

                      <p>This is a written walkthrough of the same
                      steps illustrated in the demo video above, but
                      with Sayid v0.0.8. You can find
                      the <a href="http://github.com/bpiel/contrived-example">contrived example</a> project here.
                      </p>

                      <p>
                      Below is the code to the test namespace. You can
                      see that we have a vending machine that
                      dispenses tacos for 85 cents. We execute
                      the <code>test1</code> function, which inserts
                      41 cents worth of change and presses the taco
                      button.
                      </p>

                      <!-- core_test -->
    <pre>
<span class="rainbow-delimiters-depth-1"> (</span><span class="keyword">ns</span> <span class="type">contrived-example.core-test</span>
   <span class="rainbow-delimiters-depth-2">(</span><span class="clojure-keyword">:require</span> <span class="rainbow-delimiters-depth-3">[</span><span class="type">clojure.test</span> <span class="clojure-keyword">:refer</span> <span class="clojure-keyword">:all</span><span class="rainbow-delimiters-depth-3">]</span>
             <span class="rainbow-delimiters-depth-3">[</span><span class="type">contrived-example.core</span> <span class="clojure-keyword">:as</span> ce<span class="rainbow-delimiters-depth-3">]</span><span class="rainbow-delimiters-depth-2">)</span><span class="rainbow-delimiters-depth-1">)</span>


<span class="rainbow-delimiters-depth-1"> (</span><span class="keyword">def</span> <span class="variable-name">test-vending-machine</span> <span class="rainbow-delimiters-depth-2">{</span><span class="clojure-keyword">:inventory</span> <span class="rainbow-delimiters-depth-3">{</span><span class="clojure-keyword">:a1</span> <span class="rainbow-delimiters-depth-4">{</span><span class="clojure-keyword">:name</span> <span class="clojure-keyword">:taco</span>
                                             <span class="clojure-keyword">:price</span> 0.85
                                             <span class="clojure-keyword">:qty</span> 10<span class="rainbow-delimiters-depth-4">}</span><span class="rainbow-delimiters-depth-3">}</span>
                            <span class="clojure-keyword">:coins-inserted</span> <span class="rainbow-delimiters-depth-3">[]</span>
                            <span class="clojure-keyword">:coins-returned</span> <span class="rainbow-delimiters-depth-3">[]</span>
                            <span class="clojure-keyword">:dispensed</span> <span class="constant">nil</span>
                            <span class="clojure-keyword">:err-msg</span> <span class="constant">nil</span><span class="rainbow-delimiters-depth-2">}</span><span class="rainbow-delimiters-depth-1">)</span>

<span class="rainbow-delimiters-depth-1"> (</span><span class="keyword">defn</span> <span class="function-name">test1</span> <span class="rainbow-delimiters-depth-2">[]</span>
   <span class="rainbow-delimiters-depth-2">(</span><span class="keyword">-&gt;</span> test-vending-machine
       <span class="rainbow-delimiters-depth-3">(</span><span class="type">ce</span><span class="default">/</span>insert-coin <span class="clojure-keyword">:quarter</span><span class="rainbow-delimiters-depth-3">)</span> <span class="comment-delimiter">;; </span><span class="comment">25
</span>       <span class="rainbow-delimiters-depth-3">(</span><span class="type">ce</span><span class="default">/</span>insert-coin <span class="clojure-keyword">:dime</span><span class="rainbow-delimiters-depth-3">)</span>    <span class="comment-delimiter">;; </span><span class="comment">35
</span>       <span class="rainbow-delimiters-depth-3">(</span><span class="type">ce</span><span class="default">/</span>insert-coin <span class="clojure-keyword">:nickel</span><span class="rainbow-delimiters-depth-3">)</span>  <span class="comment-delimiter">;; </span><span class="comment">40
</span>       <span class="rainbow-delimiters-depth-3">(</span><span class="type">ce</span><span class="default">/</span>insert-coin <span class="clojure-keyword">:penny</span><span class="rainbow-delimiters-depth-3">)</span>   <span class="comment-delimiter">;; </span><span class="comment">41 cents
</span>       <span class="rainbow-delimiters-depth-3">(</span><span class="type">ce</span><span class="default">/</span>press-button <span class="clojure-keyword">:a1</span><span class="rainbow-delimiters-depth-3">)</span><span class="rainbow-delimiters-depth-2">)</span><span class="rainbow-delimiters-depth-1">)</span>   <span class="comment-delimiter">;; </span><span class="comment">taco costs 85 cents
</span>
<span class="rainbow-delimiters-depth-1"> (</span>test1<span class="rainbow-delimiters-depth-1">)</span>
</pre>

                      <!-- END core_test -->

                      <p>Let's press some keys to get Sayid going.</p>

                      <p>eval the namespace <span class="kbd">C-c C-k</span> (probably) (<code>cider-load-buffer</code>)</p>
                      <p>trace the project namespaces <span class="kbd">C-c s t p</span> (<code>sayid-trace-ns-by-pattern</code>) then <code>contrived-example.*</code></p>

                      <p>This should pop up. It shows how many functions have been traced in which namespaces. Execute <code>test1</code>!</p>
                      <!-- sayid traced -->

<pre>Traced namespaces:
  5 / 5  contrived-example.core
  1 / 1  contrived-example.core-test
  8 / 8  contrived-example.inner-workings


Traced functions:
</pre>

                      <!-- END sayid traced -->

                      <p>You can't tell yet, but something magical
                        happened. Press <span class="kbd">C-c s w</span>
                        (<code>sayid-get-workspace</code>)
                      to get an overview of what has been captured in
                      the Sayid workspace. This monster should
                      appear:</p>

                      <!-- sayid ws 1 -->
                      <pre><span class="RED3">v</span> <span class="NOPE"><span class="RED3">contrived-example.core-test/test1</span></span>  <span class="WHITE">:13446</span>
<span class="RED3">|</span><span class="YELLOW3">v</span> <span class="NOPE"><span class="YELLOW3">contrived-example.core/insert-coin</span></span>  <span class="WHITE">:13447</span>
<span class="RED3">|</span><span class="YELLOW3">^</span>
<span class="RED3">|</span><span class="YELLOW3">v</span> <span class="NOPE"><span class="YELLOW3">contrived-example.core/insert-coin</span></span>  <span class="WHITE">:13448</span>
<span class="RED3">|</span><span class="YELLOW3">^</span>
<span class="RED3">|</span><span class="YELLOW3">v</span> <span class="NOPE"><span class="YELLOW3">contrived-example.core/insert-coin</span></span>  <span class="WHITE">:13449</span>
<span class="RED3">|</span><span class="YELLOW3">^</span>
<span class="RED3">|</span><span class="YELLOW3">v</span> <span class="NOPE"><span class="YELLOW3">contrived-example.core/insert-coin</span></span>  <span class="WHITE">:13450</span>
<span class="RED3">|</span><span class="YELLOW3">^</span>
<span class="RED3">|</span><span class="YELLOW3">v</span> <span class="NOPE"><span class="YELLOW3">contrived-example.core/press-button</span></span>  <span class="WHITE">:13451</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">v</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/valid-selection</span></span>  <span class="WHITE">:13452</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">v</span> <span class="NOPE"><span class="CYAN3">contrived-example.inner-workings/get-selection</span></span>  <span class="WHITE">:13453</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">v</span> <span class="NOPE"><span class="CYAN3">contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13454</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/valid-selection</span></span>  <span class="WHITE">:13452</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">v</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/process-transaction</span></span>  <span class="WHITE">:13455</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">v</span> <span class="NOPE"><span class="CYAN3">contrived-example.inner-workings/get-selection</span></span>  <span class="WHITE">:13456</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">v</span> <span class="NOPE"><span class="CYAN3">contrived-example.inner-workings/calc-change-to-return</span></span>  <span class="WHITE">:13457</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">v</span> <span class="NOPE"><span class="PURPLE">contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13458</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">v</span> <span class="NOPE"><span class="PURPLE">contrived-example.inner-workings/round-to-pennies</span></span>  <span class="WHITE">:13459</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">v</span> <span class="NOPE"><span class="PURPLE">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13460</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">v</span> <span class="NOPE"><span class="RED3">contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13461</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">v</span> <span class="NOPE"><span class="RED3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13462</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">v</span> <span class="NOPE"><span class="YELLOW3">contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13463</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">v</span> <span class="NOPE"><span class="YELLOW3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13464</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">v</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13465</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">v</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13466</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">v</span> <span class="NOPE"><span class="CYAN3">contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13467</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13466</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">v</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13468</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">v</span> <span class="NOPE"><span class="CYAN3">contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13469</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13468</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">v</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13470</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">v</span> <span class="NOPE"><span class="CYAN3">contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13471</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13470</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span> <span class="NOPE"><span class="YELLOW3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13464</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span> <span class="NOPE"><span class="RED3">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13462</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span> <span class="NOPE"><span class="PURPLE">contrived-example.inner-workings/calc-change-to-return*</span></span>  <span class="WHITE">:13460</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span> <span class="NOPE"><span class="CYAN3">contrived-example.inner-workings/calc-change-to-return</span></span>  <span class="WHITE">:13457</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> <span class="NOPE"><span class="GREEN3">contrived-example.inner-workings/process-transaction</span></span>  <span class="WHITE">:13455</span>
<span class="RED3">|</span><span class="YELLOW3">|</span><span class="GREEN3">^</span>
<span class="RED3">|</span><span class="YELLOW3">|</span> <span class="NOPE"><span class="YELLOW3">contrived-example.core/press-button</span></span>  <span class="WHITE">:13451</span>
<span class="RED3">|</span><span class="YELLOW3">^</span>
<span class="RED3">|</span> <span class="NOPE"><span class="RED3">contrived-example.core-test/test1</span></span>  <span class="WHITE">:13446</span>
<span class="RED3">^</span>
</pre>
                      <!-- END sayid ws 1 -->

                      <p>What's the meaning of this? These are all the
                      function calls that were made in the traced
                      namespaced when we
                        execute <code>test1</code>. </p>

                      <p> Let's explore. Get your cursor to the first
                      line of the output and
                      press <span class="kbd">i</span> (<code>sayid-query-id</code>).</p>

                      <!-- sayid instance test1 -->
    <pre>
<span class="RED3"> v</span> <span class="WHITE"><span class="RED3">contrived-example.core-test/test1</span></span>  <span class="WHITE">:13446</span>
<span class="RED3"> |</span> returned =&gt;  {<span class="keyword">:inventory</span> {<span class="keyword">:a1</span> {<span class="keyword">:name</span> <span class="keyword">:taco</span> <span class="keyword">:price</span> <span class="PURPLE">0.85</span> <span class="keyword">:qty</span> <span class="PURPLE">9</span>}}
<span class="RED3"> |</span>               <span class="keyword">:coins-inserted</span> []
<span class="RED3"> |</span>               <span class="keyword">:coins-returned</span> [<span class="keyword">:quarter</span> <span class="keyword">:quarter</span> <span class="keyword">:nickel</span>]
<span class="RED3"> |</span>               <span class="keyword">:dispensed</span> {<span class="keyword">:name</span> <span class="keyword">:taco</span> <span class="keyword">:price</span> <span class="PURPLE">0.85</span> <span class="keyword">:qty</span> <span class="PURPLE">10</span>}
<span class="RED3"> |</span>               <span class="keyword">:err-msg</span> nil}
<span class="RED3"> ^</span>
 </pre>
                      <!-- END sayid instance test1 -->

                      <p>This shows us the details of
                      that <i><b>i</b>nstance</i> of <code>test1</code> being
                      called. We can see that a hash map was
                      returned. Despite us inserting only 41 cents for
                      an 85 cent taco, we see that a taco was
                        dispensed, plus change! That's a BUG.</p>

                      <p>Hit <span class="kbd">backspace</span> (<code>sayid-buf-back</code>). We're
                      back at the overview. Scan the list of functions
                      that are called. Let's assume some programmer's
                      intuition and decide
                      that <code>valid-selection</code> is the first
                      place of interest. Get your cursor to that line
                        and press these keys to view the <i><b>i</b>nstance</i> and all of its <i><b>d</b>escendants</i>.
                        <span class="kbd">I</span>
                        <span class="kbd">d</span>
                        <span class="kbd">ENTER</span>
                        (<code>sayid-query-id-w-mode</code>)
                      </p>

                      <!-- sayid instance 2 and descendants -->
    <pre>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">v</span> <span class="CYAN3"><span class="GREEN3">contrived-example.inner-workings/valid-selection</span></span>  <span class="WHITE">:13452</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> machine =&gt; {<span class="YELLOW3">:inventory</span> {<span class="YELLOW3">:a1</span> {<span class="YELLOW3">:name</span> <span class="YELLOW3">:taco</span> <span class="YELLOW3">:price</span> <span class="CYAN3">0.85</span> <span class="YELLOW3">:qty</span> <span class="CYAN3">10</span>}}
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span>             <span class="YELLOW3">:coins-inserted</span> [<span class="YELLOW3">:quarter</span> <span class="YELLOW3">:dime</span> <span class="YELLOW3">:nickel</span> <span class="YELLOW3">:penny</span>]
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span>             <span class="YELLOW3">:coins-returned</span> []
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span>             <span class="YELLOW3">:dispensed</span> nil
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span>             <span class="YELLOW3">:err-msg</span> nil}
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> button =&gt; <span class="YELLOW3">:a1</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> returns =&gt;  true
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">v</span> <span class="CYAN3"><span class="CYAN3">contrived-example.inner-workings/get-selection</span></span>  <span class="WHITE">:13453</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span> machine =&gt; {<span class="YELLOW3">:inventory</span> {<span class="YELLOW3">:a1</span> {<span class="YELLOW3">:name</span> <span class="YELLOW3">:taco</span> <span class="YELLOW3">:price</span> <span class="CYAN3">0.85</span> <span class="YELLOW3">:qty</span> <span class="CYAN3">10</span>}}
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span>             <span class="YELLOW3">:coins-inserted</span> [<span class="YELLOW3">:quarter</span> <span class="YELLOW3">:dime</span> <span class="YELLOW3">:nickel</span> <span class="YELLOW3">:penny</span>]
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span>             <span class="YELLOW3">:coins-returned</span> []
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span>             <span class="YELLOW3">:dispensed</span> nil
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span>             <span class="YELLOW3">:err-msg</span> nil}
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span> button =&gt; <span class="YELLOW3">:a1</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span> returned =&gt;  {<span class="YELLOW3">:name</span> <span class="YELLOW3">:taco</span> <span class="YELLOW3">:price</span> <span class="CYAN3">0.85</span> <span class="YELLOW3">:qty</span> <span class="CYAN3">10</span>}
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">^</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">v</span> <span class="CYAN3"><span class="CYAN3">contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13454</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span> coins =&gt; [<span class="YELLOW3">:quarter</span> <span class="YELLOW3">:dime</span> <span class="YELLOW3">:nickel</span> <span class="YELLOW3">:penny</span>]
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span> returned =&gt;  <span class="CYAN3">1.4</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">^</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> <span class="CYAN3"><span class="GREEN3">contrived-example.inner-workings/valid-selection</span></span>  <span class="WHITE">:13452</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> machine =&gt; {<span class="YELLOW3">:inventory</span> {<span class="YELLOW3">:a1</span> {<span class="YELLOW3">:name</span> <span class="YELLOW3">:taco</span> <span class="YELLOW3">:price</span> <span class="CYAN3">0.85</span> <span class="YELLOW3">:qty</span> <span class="CYAN3">10</span>}}
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span>             <span class="YELLOW3">:coins-inserted</span> [<span class="YELLOW3">:quarter</span> <span class="YELLOW3">:dime</span> <span class="YELLOW3">:nickel</span> <span class="YELLOW3">:penny</span>]
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span>             <span class="YELLOW3">:coins-returned</span> []
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span>             <span class="YELLOW3">:dispensed</span> nil
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span>             <span class="YELLOW3">:err-msg</span> nil}
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> button =&gt; <span class="YELLOW3">:a1</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span> returned =&gt;  true
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">^</span>

</pre>

                      <!-- END sayid instance 2 and descendants -->

                      <p>We can see that <code>valid-selection</code>
                      makes calls to <code>get-selection</code>
                      and <code>calc-coin-value</code>.  Looking at
                      the return values, we might notice a
                      problem: <code>calc-coin-value</code>
                      receives <code>[:quarter :dime :nickel
                      :penny]</code> but returns $1.40 as the
                      value. Let's dig
                      deeper. Press <span class="kbd">n</span> (<code>sayid-buffer-nav-to-next</code>) a
                      couple times to get the cursor to the call
                      to <code>calc-coin-value</code>. Now
                      press <span class="kbd">N</span> (<code>sayid-buf-replay-with-inner-trace</code>) and hold onto
                      your hat.
                      </p>

                      <!-- inner trace -->
                          <pre>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">v</span> <span class="PURPLE-BG"><span class="BLACK">(-&gt;&gt; coins (keep coin-values) (apply +))</span></span><span class="ATTRLIST-5"><span class="PURPLE"> =&gt; (apply + (keep coin-values coins))  contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13491</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span> returns =&gt;  <span class="CYAN3">1.4</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">v</span> <span class="RED3-BG"><span class="BLACK">(apply + (keep coin-values coins))</span></span><span class="ATTRLIST-5"><span class="RED3">  contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13492</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span> #function[clojure.core/+]
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span> (<span class="CYAN3">0.25</span> <span class="CYAN3">0.1</span> <span class="CYAN3">0.05</span> <span class="CYAN3">1</span>)
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span> returns =&gt;  <span class="CYAN3">1.4</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">v</span> <span class="YELLOW3-BG"><span class="BLACK">(keep coin-values coins)</span></span><span class="ATTRLIST-5"><span class="YELLOW3">  contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13493</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span> {<span class="YELLOW3">:quarter</span> <span class="CYAN3">0.25</span> <span class="YELLOW3">:dime</span> <span class="CYAN3">0.1</span> <span class="YELLOW3">:nickel</span> <span class="CYAN3">0.05</span> <span class="YELLOW3">:penny</span> <span class="CYAN3">1</span>}
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span> [<span class="YELLOW3">:quarter</span> <span class="YELLOW3">:dime</span> <span class="YELLOW3">:nickel</span> <span class="YELLOW3">:penny</span>]
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">|</span> returned =&gt;  (<span class="CYAN3">0.25</span> <span class="CYAN3">0.1</span> <span class="CYAN3">0.05</span> <span class="CYAN3">1</span>)
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span><span class="YELLOW3">^</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span> <span class="RED3-BG"><span class="BLACK">(apply + (keep coin-values coins))</span></span><span class="ATTRLIST-5"><span class="RED3">  contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13492</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span> #function[clojure.core/+]
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span> (<span class="CYAN3">0.25</span> <span class="CYAN3">0.1</span> <span class="CYAN3">0.05</span> <span class="CYAN3">1</span>)
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">|</span> returned =&gt;  <span class="CYAN3">1.4</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span><span class="RED3">^</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span> <span class="PURPLE-BG"><span class="BLACK">(-&gt;&gt; coins (keep coin-values) (apply +))</span></span><span class="ATTRLIST-5"><span class="PURPLE"> =&gt; (apply + (keep coin-values coins))  contrived-example.inner-workings/calc-coin-value</span></span>  <span class="WHITE">:13491</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">|</span> returned =&gt;  <span class="CYAN3">1.4</span>
<span class="RED3"> |</span><span class="YELLOW3">|</span><span class="GREEN3">|</span><span class="CYAN3">|</span><span class="PURPLE">^</span>
...truncated...
</pre>

                      <!-- END inner trace -->
                      <p> <i>(jump to the top of the buffer)</i><br>
                        What did we do? We applied an <i>inner
                      trace</i> to the
                      function <code>calc-coin-value</code> and then
                      replayed the call to <code>test1</code> that we
                      had captured originally.</p>

                      <p><i><b>An INNER trace?</b></i> YES! We can see the inputs and output values of each expression in the function. Look at it. Where do things go wrong? It's when we pass a hash map to <code>keep</code> that defines a penny as being worth a dollar. Bug located! Press <span class="kbd">n</span> a couple times to get your cursor to that call. Press <span class="kbd">ENTER</span> to jump to that line of code.  </p>

                      <!-- inner workings -->
                         <pre>
<span class="rainbow-delimiters-depth-1"> (</span><span class="keyword">ns</span> <span class="type">contrived-example.inner-workings</span><span class="rainbow-delimiters-depth-1">)</span>

<span class="rainbow-delimiters-depth-1"> (</span><span class="keyword">def</span> <span class="variable-name">coin-values</span>
   <span class="rainbow-delimiters-depth-2">{</span><span class="clojure-keyword">:quarter</span> 0.25
    <span class="clojure-keyword">:dime</span> 0.10
    <span class="clojure-keyword">:nickel</span> 0.05
    <span class="clojure-keyword">:penny</span> 1<span class="rainbow-delimiters-depth-2">}</span><span class="rainbow-delimiters-depth-1">)</span>

<span class="rainbow-delimiters-depth-1"> (</span><span class="keyword">defn-</span> <span class="function-name">calc-coin-value</span>
   <span class="rainbow-delimiters-depth-2">[</span>coins<span class="rainbow-delimiters-depth-2">]</span>
   <span class="rainbow-delimiters-depth-2">(</span><span class="keyword">-&gt;&gt;</span> coins
        <span class="rainbow-delimiters-depth-3">(</span><span class="function-name">keep</span> coin-values<span class="rainbow-delimiters-depth-3">)</span>
        <span class="rainbow-delimiters-depth-3">(</span><span class="function-name">apply</span> <span class="function-name">+</span><span class="rainbow-delimiters-depth-3">)</span><span class="rainbow-delimiters-depth-2">)</span><span class="rainbow-delimiters-depth-1">)</span>

...truncated...
</pre>
                      <!-- END inner workings -->

                      <p>We now find ourselves at the troublesome call to <code>keep</code> causing our bug. The hash map, <code>coin-values</code>, is just above. Change the value of a penny from <code>1</code> to <code>0.01</code>. Let's eval our corrected code the Sayid way -- press <span class="kbd">C-c s !</span> (<code>sayid-load-enable-clear</code>). This will remove the traces, eval the buffer, then re-apply the traces. It also clears the workspace log. This is all helpful. Navigate back to <code>core-test</code> and run <code>test1</code> again. Repeating steps above, you can verify the output is now correct: no taco.

                        <!-- fixed -->
                        <pre>
<span class="RED3"> v</span> <span class="ATTRLIST-4"><span class="RED3">contrived-example.core-test/test1</span></span>  <span class="ATTRLIST-2">:13579</span>
<span class="RED3"> |</span> returned =&gt;  {<span class="YELLOW3">:inventory</span> {<span class="YELLOW3">:a1</span> {<span class="YELLOW3">:name</span> <span class="YELLOW3">:taco</span> <span class="YELLOW3">:price</span> <span class="CYAN3">0.85</span> <span class="YELLOW3">:qty</span> <span class="CYAN3">10</span>}}
<span class="RED3"> |</span>               <span class="YELLOW3">:coins-inserted</span> [<span class="YELLOW3">:quarter</span> <span class="YELLOW3">:dime</span> <span class="YELLOW3">:nickel</span> <span class="YELLOW3">:penny</span>]
<span class="RED3"> |</span>               <span class="YELLOW3">:coins-returned</span> []
<span class="RED3"> |</span>               <span class="YELLOW3">:dispensed</span> nil
<span class="RED3"> |</span>               <span class="YELLOW3">:err-msg</span> true}
<span class="RED3"> ^</span>

</pre>

                        <!-- END fixed -->

                      <p>Great work!</p>

                      <h2 id="documentation">Documentation</h2>

                      <p>Documentation is a little light at the
                      moment. There are lists of
                      keybindings. Helpfully, they are easily
                      accessible from within emacs. Below are the
                      contents of the various help buffers, as well as
                      instructions on how to pop them up in time of
                      need.</p>

                      <p>Generated docs are also available for the core namespace <a href="doc">here</a>.

                      <p>In a clojure-mode buffer, press <span class="kbd">C-c s h</span> (<code>sayid-show-help</code>) to pop up the help buffer.</p>
                      <pre>
C-c s ! -- Disble traces, eval current buffer, enable traces, clear the workspace log
C-c s e -- Enables traces, evals the expression at point, disables traces, displays results with terse view
C-c s f -- Queries the active workspace for entries that most closely match the context of the cursor position
C-c s n -- Applies an inner trace to the function at point, replays workspace, displays results
C-c s r -- Replays workspace, queries results by context of cursor
C-c s w -- Shows workspace, using the current view
C-c s t y -- Prompts for a dir, recursively traces all ns's in that dir and subdirs
C-c s t p -- Prompts for a pattern (* = wildcare), and applies a trace to all *loaded* ns's whose name matches the patten
C-c s t b -- Trace the ns in the current buffer
C-c s t e -- Enable the *existing* (if any) trace of the function at point
C-c s t E -- Enable all traces
C-c s t d -- Disable the *existing* (if any) trace of the function at point
C-c s t D -- Disable all traces
C-c s t n -- Apply an inner trace to the symbol at point
C-c s t o -- Apply an outer trace to the symbol at point
C-c s t r -- Remove existing trace from the symbol at point
C-c s t K -- Remove all traces
C-c s c -- Clear the workspace trace log
C-c s x -- Blow away workspace -- traces and logs
C-c s s -- Popup buffer showing what it currently traced
C-c s S -- Popup buffer showing what it currently traced in buffer's ns
C-c s V s -- Set the view
C-c s h -- show this help
                      </pre>

                      <p>In the *sayid* buffer, press <span class="kbd">h</span> to pop up the help buffer.</p>
                      <pre>
ENTER -- pop to function
d -- def value to $s/*
f -- query for calls to function
F -- query for calls to function with modifier
i -- show only this instance
I -- query for this instance with modifier
w -- show full workspace trace
n -- jump to next call node
N -- apply inner trace and reply workspace
p -- jump to prev call node
P -- pretty print value
C -- clear workspace trace log
v -- toggle view
V -- set view (see register-view)
l, backspace -- previous buffer state
L, S-backspace -- forward buffer state
g -- generate instance expression and put in kill ring
h -- help
                      </pre>


                      <p>In the *sayid-traced* buffer, press <span class="kbd">h</span> to pop up the help buffer.</p>
                      <pre>
enter -- Drill into ns at point
e -- Enable trace
d -- Disable trace
E -- Enable ALL traces
D -- Disable ALL traces
i -- Apply inner trace to func at point
o -- Apply outer trace to func at point
r -- Remove trace from fun at point
l, backspace -- go back to trace overview (if in ns view)
                      </pre>

                      <p>In the *sayid-pprint* buffer, press <span class="kbd">h</span> to pop up the help buffer.</p>
<pre>
ENTER -- show path in mini-buffer
i -- jump into child node
o -- jump out to parent node
n -- jump to next sibling node
p -- jump to previous sibling node
</pre>

                    </div><!-- #content -->
                </div><!-- #primary -->

            </div><!--.wrap-->
        </div><!--#main-->

        <div id="footer" class="site-footer">
            <div class="wrap">

              <p class="site-credits">Copyright (c) <a href="http://billpiel.com">Bill Piel</a>, 2016.</p>

            </div><!--.wrap-->
        </div><!--#footer-->

    </div><!--#page-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46290114-3', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>
